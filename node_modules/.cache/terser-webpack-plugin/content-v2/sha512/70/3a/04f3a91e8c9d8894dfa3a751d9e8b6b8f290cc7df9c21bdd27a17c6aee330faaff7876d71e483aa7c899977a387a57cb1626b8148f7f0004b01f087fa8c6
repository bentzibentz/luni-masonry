{"code":"!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){\"use strict\";i.r(e);e.default=class{constructor({parent:t=document.querySelector(\"#luni\"),links:e=document.querySelectorAll(\"[data-luni-link]\"),active:i=\"is-active\",margin:n=20,responsive:s={980:{columns:3},480:{columns:2},0:{columns:1}},fadeDuration:r={in:300,out:0}}={}){this.parent=t,this.links=Array.from(e),this.active=i,this.margin=n,this.responsive=s,this.fadeDuration=r,this.elements=Array.from(this.parent.children),this.activeElements=this.elements,this.columns=1,this.dataLink=\"all\",this.winWidth=window.innerWidth,this.init()}orderElements(){const{parent:t,activeElements:e,columns:i,blocWidth:n,margin:s}=this,r=e.reduce((t,e,r)=>{const o=this.sumArrHeight(t,i),l=r%i*(n+s),a=r-i>=0?o[r%i]+s*Math.floor(r/i):0;return e.style.transform=`translate3d(${l}px, ${a}px, 0)`,t.push(e.offsetHeight),t},[]),o=this.sumArrHeight(r,i),l=Math.max(...o)+s*(Math.floor(e.length/i)-1);t.style.height=l+\"px\"}handleFilterClick(t,e){t.preventDefault();const{links:i,active:n}=this;e.dataset.luniLink!==this.dataLink&&(this.dataLink=e.dataset.luniLink,i.forEach(t=>{t.isEqualNode(e)?t.classList.add(n):t.classList.remove(n)}),this.filterElements(()=>{this.orderElements()}))}resize(){window.addEventListener(\"resize\",()=>{clearTimeout(window.sortableResize),window.sortableResize=setTimeout(()=>{this.winWidth=window.innerWidth,this.setBlockWidth(()=>{this.orderElements()})},500)})}init(){const{parent:t,links:e,active:i}=this;e.forEach((t,e)=>{0===e&&(t.classList.add(i),this.dataLink=t.dataset.luniLink),t.addEventListener(\"click\",e=>{this.handleFilterClick(e,t)})}),this.setBlockWidth(),window.addEventListener(\"load\",()=>{this.filterElements(()=>{this.orderElements()}),t.style.opacity=\"1\"}),this.resize()}setBlockWidth(t){const{parent:e,elements:i,margin:n,responsive:s}=this;this.columns=this.columnsCount(s).columns;const r=this.columns;this.blocWidth=(e.clientWidth-n*(r-1))/r;const o=this.blocWidth;i.forEach(t=>{t.style.width=o+\"px\"}),t&&t()}filterElements(t){const{elements:e,dataLink:i,fadeDuration:n}=this;this.activeElements=e.filter(t=>\"all\"===i||t.dataset.luniEl.split(\",\").includes(i)?(this.fadeIn(t,n.in),!0):(this.fadeOut(t,n.out),!1)),t&&t()}sumArrHeight(t,e){return t.reduce((t,i,n)=>{const s=n%e;return t[s]||(t[s]=0),t[s]+=t[s]+i,t},[])}columnsCount(t){const{winWidth:e}=this;return Object.entries(t).reduce((t,i)=>e>i[0]&&i[0]>=Math.max(t.width)?{width:i[0],columns:i[1].columns}:t,{width:0,columns:4})}fadeIn(t,e=300,i=null){let n=Number.parseFloat(window.getComputedStyle(t,null).getPropertyValue(\"opacity\"));const s=16/e;t.style.display=\"block\",requestAnimationFrame((function e(){n+=s,n<=1?(t.style.opacity=n,requestAnimationFrame(e)):(t.style.opacity=\"1\",i&&i())}))}fadeOut(t,e=300,i=null){let n=Number.parseFloat(window.getComputedStyle(t,null).getPropertyValue(\"opacity\"));const s=e?16/e:1;requestAnimationFrame((function e(){n-=s,n>=0?(t.style.opacity=n,requestAnimationFrame(e)):(t.style.opacity=\"0\",t.style.display=\"none\",i&&i())}))}}}]);","extractedComments":[]}